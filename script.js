const ctx = document.getElementById('chart').getContext('2d');let chart;
async function fetchData(){const symbol=document.getElementById('symbol').value.trim().toUpperCase()||'BTCUSDT';const interval=document.getElementById('interval').value||'30m';document.getElementById('price').textContent='â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±...';try{const res=await fetch(`https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=${interval}&limit=50`);const data=await res.json();if(!Array.isArray(data)){document.getElementById('info').textContent='Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø§Ø³ØªØ¬Ø§Ø¨Ø© API';return;}const labels=data.map(c=>new Date(c[0]).toLocaleString());const closes=data.map(c=>parseFloat(c[4]));document.getElementById('price').textContent=`ğŸ’° Ø¢Ø®Ø± Ø³Ø¹Ø±: ${closes[closes.length-1]} USDT`;if(chart)chart.destroy();chart=new Chart(ctx,{type:'line',data:{labels,datasets:[{label:`${symbol} Ø§Ù„Ø³Ø¹Ø±`,data:closes,borderColor:'gold',backgroundColor:'rgba(255,215,0,0.15)',fill:true,tension:0.2}]},options:{scales:{x:{ticks:{color:'#000'}},y:{ticks:{color:'#000'}}}}});document.getElementById('info').textContent=`Ø¹Ø±Ø¶ ${closes.length} Ø´Ù…Ø¹Ø§Øª â€” ÙØ±ÙŠÙ… ${interval}`;}catch(e){console.error(e);document.getElementById('info').textContent='Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.'}}document.getElementById('fetch').addEventListener('click',fetchData);fetchData();
